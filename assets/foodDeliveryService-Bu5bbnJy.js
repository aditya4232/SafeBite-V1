import{A as f,f as b}from"./index-DOqsZv3U.js";const k=[`${f}/api/food-delivery/scrape`,"http://localhost:5000/api/food-delivery/scrape","/api/food-delivery/scrape"],C=async(r,o,n)=>{try{const a=await B(r,o,n);if(a&&a.length>0)return console.log(`Found ${a.length} restaurants from web scraping`),a}catch(a){console.error("Error fetching from web scraping API:",a)}try{console.log(`Fetching restaurants for ${r} in ${o}`),n&&console.log(`User coordinates: ${n.latitude}, ${n.longitude}`);const a=o.toLowerCase(),u=a.includes("hyd")||a.includes("hyderabad"),t=a.includes("mum")||a.includes("bombay"),c=a.includes("delhi")||a.includes("new delhi"),d=a.includes("bang")||a.includes("bengaluru"),i=r.toLowerCase(),m=[{restaurant:"Paradise Biryani",redirect:"https://www.zomato.com/hyderabad/paradise-biryani",rating:4.2,delivery_time:"30-35 mins",price_range:"₹350 for two",cuisine:"North Indian",address:"Masab Tank, Hyderabad",image_url:"https://source.unsplash.com/random/300x300/?biryani,restaurant",platform:"Zomato",distance_km:2.3,latitude:17.395,longitude:78.4867,popular_dishes:["Chicken Biryani","Mutton Biryani","Kebabs"]},{restaurant:"Bawarchi Restaurant",redirect:"https://www.swiggy.com/restaurants/bawarchi-restaurant-hyderabad",rating:4,delivery_time:"35-40 mins",price_range:"₹300 for two",cuisine:"North Indian",address:"RTC X Roads, Hyderabad",image_url:"https://source.unsplash.com/random/300x300/?indian,restaurant",platform:"Swiggy",distance_km:3.1,latitude:17.401,longitude:78.493,popular_dishes:["Hyderabadi Biryani","Butter Chicken","Rumali Roti"]},{restaurant:"Shah Ghouse",redirect:"https://www.zomato.com/hyderabad/shah-ghouse-cafe-restaurant-tolichowki",rating:4.3,delivery_time:"25-30 mins",price_range:"₹250 for two",cuisine:"North Indian",address:"Tolichowki, Hyderabad",image_url:"https://source.unsplash.com/random/300x300/?kebab,restaurant",platform:"Zomato",distance_km:1.8,latitude:17.405,longitude:78.406,popular_dishes:["Haleem","Biryani","Irani Chai"]},{restaurant:"Domino's Pizza",redirect:"https://www.swiggy.com/restaurants/dominos-pizza-hyderabad",rating:4.1,delivery_time:"20-25 mins",price_range:"₹400 for two",cuisine:"Italian",address:"Banjara Hills, Hyderabad",image_url:"https://source.unsplash.com/random/300x300/?pizza,restaurant",platform:"Swiggy",distance_km:2.5,latitude:17.415,longitude:78.435,popular_dishes:["Margherita Pizza","Pepperoni Pizza","Garlic Bread"]},{restaurant:"Pizza Hut",redirect:"https://www.zomato.com/hyderabad/pizza-hut-himayath-nagar",rating:3.9,delivery_time:"30-35 mins",price_range:"₹450 for two",cuisine:"Italian",address:"Himayath Nagar, Hyderabad",image_url:"https://source.unsplash.com/random/300x300/?pizza,restaurant",platform:"Zomato",distance_km:3.7,latitude:17.393,longitude:78.48,popular_dishes:["Cheese Pizza","Stuffed Crust Pizza","Pasta"]},{restaurant:"Mehfil Restaurant",redirect:"https://www.swiggy.com/restaurants/mehfil-restaurant-hyderabad",rating:4.2,delivery_time:"25-30 mins",price_range:"₹350 for two",cuisine:"North Indian",address:"Ameerpet, Hyderabad",image_url:"https://source.unsplash.com/random/300x300/?curry,restaurant",platform:"Swiggy",distance_km:4.2,latitude:17.437,longitude:78.448,popular_dishes:["Chicken Biryani","Butter Naan","Paneer Butter Masala"]},{restaurant:"Kritunga Restaurant",redirect:"https://www.zomato.com/hyderabad/kritunga-restaurant-madhapur",rating:4,delivery_time:"35-40 mins",price_range:"₹400 for two",cuisine:"South Indian",address:"Madhapur, Hyderabad",image_url:"https://source.unsplash.com/random/300x300/?southindian,restaurant",platform:"Zomato",distance_km:5.1,latitude:17.448,longitude:78.391,popular_dishes:["Andhra Biryani","Gongura Chicken","Ragi Sangati"]},{restaurant:"Chutneys",redirect:"https://www.swiggy.com/restaurants/chutneys-hyderabad",rating:4.4,delivery_time:"20-25 mins",price_range:"₹300 for two",cuisine:"South Indian",address:"Jubilee Hills, Hyderabad",image_url:"https://source.unsplash.com/random/300x300/?dosa,restaurant",platform:"Swiggy",distance_km:3.9,latitude:17.431,longitude:78.407,popular_dishes:["Masala Dosa","Idli Sambar","Mysore Bonda"]}],e=[{restaurant:"Trishna",redirect:"https://www.zomato.com/mumbai/trishna-fort",rating:4.5,delivery_time:"30-35 mins",price_range:"₹1500 for two",cuisine:"Seafood",address:"Fort, Mumbai",image_url:"https://source.unsplash.com/random/300x300/?seafood,restaurant",platform:"Zomato",distance_km:2.3,latitude:18.9322,longitude:72.8328,popular_dishes:["Butter Garlic Crab","Prawns Koliwada","Fish Tikka"]},{restaurant:"Britannia & Co.",redirect:"https://www.swiggy.com/restaurants/britannia-and-co-mumbai",rating:4.6,delivery_time:"35-40 mins",price_range:"₹800 for two",cuisine:"Parsi",address:"Ballard Estate, Mumbai",image_url:"https://source.unsplash.com/random/300x300/?parsi,food",platform:"Swiggy",distance_km:3.1,latitude:18.9372,longitude:72.8384,popular_dishes:["Berry Pulao","Sali Boti","Caramel Custard"]},{restaurant:"Mahesh Lunch Home",redirect:"https://www.zomato.com/mumbai/mahesh-lunch-home-juhu",rating:4.3,delivery_time:"25-30 mins",price_range:"₹1000 for two",cuisine:"Seafood",address:"Juhu, Mumbai",image_url:"https://source.unsplash.com/random/300x300/?fish,restaurant",platform:"Zomato",distance_km:1.8,latitude:19.0883,longitude:72.8264,popular_dishes:["Butter Garlic Prawns","Bombil Fry","Crab Masala"]}],w=[{restaurant:"Karim's",redirect:"https://www.zomato.com/ncr/karims-jama-masjid-old-delhi",rating:4.5,delivery_time:"30-35 mins",price_range:"₹600 for two",cuisine:"North Indian",address:"Jama Masjid, Old Delhi",image_url:"https://source.unsplash.com/random/300x300/?kebab,restaurant",platform:"Zomato",distance_km:2.3,latitude:28.6507,longitude:77.2334,popular_dishes:["Mutton Burra","Chicken Jahangiri","Mutton Korma"]},{restaurant:"Bukhara",redirect:"https://www.swiggy.com/restaurants/bukhara-itc-maurya-delhi",rating:4.8,delivery_time:"35-40 mins",price_range:"₹5000 for two",cuisine:"North Indian",address:"ITC Maurya, Diplomatic Enclave",image_url:"https://source.unsplash.com/random/300x300/?tandoori,restaurant",platform:"Swiggy",distance_km:3.1,latitude:28.5977,longitude:77.17,popular_dishes:["Dal Bukhara","Sikandari Raan","Tandoori Jhinga"]},{restaurant:"Moti Mahal",redirect:"https://www.zomato.com/ncr/moti-mahal-delux-south-extension-2-delhi",rating:4.3,delivery_time:"25-30 mins",price_range:"₹1200 for two",cuisine:"North Indian",address:"South Extension, Delhi",image_url:"https://source.unsplash.com/random/300x300/?curry,restaurant",platform:"Zomato",distance_km:1.8,latitude:28.5691,longitude:77.222,popular_dishes:["Butter Chicken","Tandoori Chicken","Dal Makhani"]}],_=[{restaurant:"MTR",redirect:"https://www.zomato.com/bangalore/mavalli-tiffin-room-mtr-lalbagh-bangalore",rating:4.6,delivery_time:"30-35 mins",price_range:"₹400 for two",cuisine:"South Indian",address:"Lalbagh, Bangalore",image_url:"https://source.unsplash.com/random/300x300/?dosa,restaurant",platform:"Zomato",distance_km:2.3,latitude:12.9516,longitude:77.5932,popular_dishes:["Masala Dosa","Rava Idli","Filter Coffee"]},{restaurant:"Meghana Foods",redirect:"https://www.swiggy.com/restaurants/meghana-foods-bangalore",rating:4.5,delivery_time:"35-40 mins",price_range:"₹700 for two",cuisine:"Andhra",address:"Residency Road, Bangalore",image_url:"https://source.unsplash.com/random/300x300/?biryani,restaurant",platform:"Swiggy",distance_km:3.1,latitude:12.9698,longitude:77.6003,popular_dishes:["Boneless Biryani","Andhra Chicken","Apollo Fish"]},{restaurant:"Empire Restaurant",redirect:"https://www.zomato.com/bangalore/empire-restaurant-koramangala-5th-block",rating:4.2,delivery_time:"25-30 mins",price_range:"₹500 for two",cuisine:"North Indian",address:"Koramangala, Bangalore",image_url:"https://source.unsplash.com/random/300x300/?kebab,restaurant",platform:"Zomato",distance_km:1.8,latitude:12.9347,longitude:77.6205,popular_dishes:["Butter Chicken","Coin Parotta","Chicken Kebab"]}];let s=[];if(u?s=m:t?s=e:c?s=w:d?s=_:s=m,r&&r.trim()!==""){const h=s.filter(l=>{var g;return(g=l.popular_dishes)==null?void 0:g.some(y=>y.toLowerCase().includes(i))});if(h.length>0)return console.log(`Found ${h.length} restaurants with matching dishes`),h;const p=s.filter(l=>l.cuisine&&l.cuisine.toLowerCase().includes(i)||l.restaurant.toLowerCase().includes(i));if(p.length>0)return console.log(`Found ${p.length} restaurants with matching cuisine or name`),p}return console.log(`Returning all ${s.length} restaurants for ${o}`),s}catch(a){return console.error("Error in food delivery service:",a),[]}},B=async(r,o,n)=>{try{const a=new URLSearchParams;a.append("food",r),a.append("city",o),n&&(a.append("lat",n.latitude.toString()),a.append("lon",n.longitude.toString()));const u=a.toString();let t=null,c=null;for(const d of k)try{const i=`${d}?${u}`;if(console.log(`Trying scraping endpoint: ${i}`),t=await b(i,{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json"}},15e3),t&&t.results&&Array.isArray(t.results)&&t.results.length>0)return console.log(`Found ${t.results.length} restaurants from ${d}`),t.results.map(e=>({restaurant:e.restaurant||"Unknown Restaurant",redirect:e.redirect||"#",rating:e.rating||4,delivery_time:e.delivery_time||"30-40 mins",price_range:e.price_range||"₹300 for two",cuisine:e.cuisine||"Various",address:e.address||`${o}`,image_url:e.image_url||`https://source.unsplash.com/random/300x300/?restaurant,${r}`,platform:e.platform||"Food Delivery",distance_km:e.distance_km,latitude:e.latitude,longitude:e.longitude,popular_dishes:e.popular_dishes||[r],offers:e.offers||[],is_favorite:!1}))}catch(i){console.warn(`Scraping endpoint ${d} failed:`,i),c=i}return console.log("All scraping endpoints failed"),[]}catch(a){return console.error("Error in scraping service:",a),[]}};export{C as fetchNearbyRestaurants};
